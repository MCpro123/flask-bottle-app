<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<style>
      
    /* Responsive layout */
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background-color: #f6f9fc;
      color: #333;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      text-align: center;
      background: #007bff;
      color: white;
      padding: 10px;
      font-size: 1.2rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    #map {
      flex: 1; /* makes the map take the remaining height */
      width: 100%;
      height: 100%;
    }

    /* Make sure map resizes properly */
    html, body, #map {
      height: 100%;
    }

    @media (max-width: 768px) {
      header {
        font-size: 1rem;
        padding: 8px;
      }
    }
</style>
<body>
  <h2>Admin Dashboard</h2>
  <div id="map" style="height: 600px;"></div>
  <a href="/logout">Logout</a>

  <script>
    const data = {{ data|tojson }};
    const map = L.map('map').setView([0, 0], 2);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    data.forEach(item => {
      if (item.latitude && item.longitude) {
        L.marker([item.latitude, item.longitude])
          .addTo(map)
          .bindPopup(`Employee ID: ${item.employee_id}<br>Bottles: ${item.bottle_count}`);
      }
    });
  </script>
</body>
</html>